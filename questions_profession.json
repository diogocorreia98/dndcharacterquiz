{
  "root": "q_primary_roles",
  "nodes": {
    "q_primary_roles": {
      "type": "question",
      "section": "class",
      "question": "Que papel preferes em combate (seleciona até 2 opções)?",
      "selection": {
        "mode": "multiple",
        "min": 1,
        "max": 2,
        "actions": [
          {
            "var": "primary_roles",
            "op": "set",
            "value_from_selection_filtered": {
              "exclude_values": [
                "HEALER_SUPPORT"
              ]
            }
          },
          {
            "var": "_pending_healer_support",
            "op": "set",
            "value_from_selection_includes": {
              "value": "HEALER_SUPPORT",
              "true_value": true,
              "false_value": null
            }
          }
        ]
      },
      "options": [
        {
          "value": "DEFENDER"
        },
        {
          "value": "HEALER_SUPPORT"
        },
        {
          "value": "CONTROLLER"
        },
        {
          "value": "STRIKER"
        },
        {
          "value": "SCOUT"
        }
      ],
      "next": "q_healer_support_preference"
    },
    "q_healer_support_preference": {
      "type": "question",
      "section": "class",
      "question": "Qual preferes?",
      "when": {
        "var": "_pending_healer_support",
        "op": "eq",
        "value": true
      },
      "options": [
        {
          "value": "HEALER",
          "set": [
            {
              "var": "primary_roles",
              "op": "set",
              "value_from_var": "primary_roles",
              "append": [
                "HEALER"
              ]
            },
            {
              "var": "_pending_healer_support",
              "op": "set",
              "value": null
            }
          ]
        },
        {
          "value": "SUPPORT",
          "set": [
            {
              "var": "primary_roles",
              "op": "set",
              "value_from_var": "primary_roles",
              "append": [
                "SUPPORT"
              ]
            },
            {
              "var": "_pending_healer_support",
              "op": "set",
              "value": null
            }
          ]
        },
        {
          "value": "BOTH",
          "set": [
            {
              "var": "primary_roles",
              "op": "set",
              "value_from_var": "primary_roles",
              "append": [
                "HEALER",
                "SUPPORT"
              ]
            },
            {
              "var": "_pending_healer_support",
              "op": "set",
              "value": null
            }
          ]
        }
      ],
      "next": "q_secondary_roles"
    },
    "q_secondary_roles": {
      "type": "question",
      "section": "class",
      "question": "Há mais algum papel que precisas que a tua personagem sirva (Seleciona 0, 1 ou 2 opções)?",
      "selection": {
        "mode": "multiple",
        "min": 0,
        "max": 2,
        "actions": [
          {
            "var": "secondary_roles",
            "op": "set",
            "value_from_selection": true
          }
        ]
      },
      "options": [
        {
          "value": "BLASTER"
        },
        {
          "value": "FACE"
        },
        {
          "value": "SCHOLAR"
        },
        {
          "value": "UTILITY_CASTER"
        }
      ],
      "next": "q_class_complexity"
    },
    "q_class_complexity": {
      "type": "question",
      "section": "class",
      "question": "Com que nível de complexidade te sentes confortável?",
      "options": [
        {
          "value": "A",
          "set": [
            {
              "var": "class_complexity",
              "op": "set",
              "value": "A"
            }
          ],
          "next": "q_class_simple_choice"
        },
        {
          "value": "B",
          "set": [
            {
              "var": "class_complexity",
              "op": "set",
              "value": "B"
            }
          ],
          "next": "q_class_medium_choice"
        },
        {
          "value": "C",
          "set": [
            {
              "var": "class_complexity",
              "op": "set",
              "value": "C"
            }
          ],
          "next": "q_class_high_choice"
        }
      ]
    },
    "q_class_simple_choice": {
      "type": "question",
      "section": "class",
      "question": "Que classe preferes jogar?",
      "options": [
        {
          "value": "BARBARIAN",
          "set": [
            {
              "var": "class",
              "op": "set",
              "value": "BARBARIAN"
            },
            {
              "var": "subclass_group",
              "op": "set",
              "value": null
            },
            {
              "var": "subclass",
              "op": "set",
              "value": null
            },
            {
              "var": "class_adjustment",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "FIGHTER",
          "set": [
            {
              "var": "class",
              "op": "set",
              "value": "FIGHTER"
            },
            {
              "var": "subclass_group",
              "op": "set",
              "value": null
            },
            {
              "var": "subclass",
              "op": "set",
              "value": null
            },
            {
              "var": "class_adjustment",
              "op": "set",
              "value": null
            },
            {
              "var": "fighting_style_choice",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_class_adjustment_fighter"
        },
        {
          "value": "ROGUE",
          "set": [
            {
              "var": "class",
              "op": "set",
              "value": "ROGUE"
            },
            {
              "var": "subclass_group",
              "op": "set",
              "value": null
            },
            {
              "var": "subclass",
              "op": "set",
              "value": null
            },
            {
              "var": "class_adjustment",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_subclass_group"
        }
      ],
      "filter_by_roles": {
        "type": "class"
      },
      "auto_select_if_single_option": true,
      "on_select": [
        {
          "var": "fighting_style_choice",
          "op": "set",
          "value": null
        }
      ]
    },
    "q_class_medium_choice": {
      "type": "question",
      "section": "class",
      "question": "Que classe preferes jogar?",
      "options": [
        {
          "value": "BARBARIAN",
          "set": [
            {
              "var": "class",
              "op": "set",
              "value": "BARBARIAN"
            },
            {
              "var": "subclass_group",
              "op": "set",
              "value": null
            },
            {
              "var": "subclass",
              "op": "set",
              "value": null
            },
            {
              "var": "class_adjustment",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "FIGHTER",
          "set": [
            {
              "var": "class",
              "op": "set",
              "value": "FIGHTER"
            },
            {
              "var": "subclass_group",
              "op": "set",
              "value": null
            },
            {
              "var": "subclass",
              "op": "set",
              "value": null
            },
            {
              "var": "class_adjustment",
              "op": "set",
              "value": null
            },
            {
              "var": "fighting_style_choice",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_class_adjustment_fighter"
        },
        {
          "value": "ROGUE",
          "set": [
            {
              "var": "class",
              "op": "set",
              "value": "ROGUE"
            },
            {
              "var": "subclass_group",
              "op": "set",
              "value": null
            },
            {
              "var": "subclass",
              "op": "set",
              "value": null
            },
            {
              "var": "class_adjustment",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "CLERIC",
          "set": [
            {
              "var": "class",
              "op": "set",
              "value": "CLERIC"
            },
            {
              "var": "subclass_group",
              "op": "set",
              "value": null
            },
            {
              "var": "subclass",
              "op": "set",
              "value": null
            },
            {
              "var": "class_adjustment",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_class_adjustment_cleric"
        },
        {
          "value": "PALADIN",
          "set": [
            {
              "var": "class",
              "op": "set",
              "value": "PALADIN"
            },
            {
              "var": "subclass_group",
              "op": "set",
              "value": null
            },
            {
              "var": "subclass",
              "op": "set",
              "value": null
            },
            {
              "var": "class_adjustment",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_class_adjustment_paladin"
        },
        {
          "value": "RANGER",
          "set": [
            {
              "var": "class",
              "op": "set",
              "value": "RANGER"
            },
            {
              "var": "subclass_group",
              "op": "set",
              "value": null
            },
            {
              "var": "subclass",
              "op": "set",
              "value": null
            },
            {
              "var": "class_adjustment",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_class_adjustment_ranger"
        },
        {
          "value": "WIZARD",
          "set": [
            {
              "var": "class",
              "op": "set",
              "value": "WIZARD"
            },
            {
              "var": "subclass_group",
              "op": "set",
              "value": null
            },
            {
              "var": "subclass",
              "op": "set",
              "value": null
            },
            {
              "var": "class_adjustment",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_subclass_group"
        }
      ],
      "filter_by_roles": {
        "type": "class"
      },
      "auto_select_if_single_option": true,
      "on_select": [
        {
          "var": "fighting_style_choice",
          "op": "set",
          "value": null
        }
      ]
    },
    "q_class_high_choice": {
      "type": "question",
      "section": "class",
      "question": "Que classe preferes jogar?",
      "options": [
        {
          "value": "BARBARIAN",
          "set": [
            {
              "var": "class",
              "op": "set",
              "value": "BARBARIAN"
            },
            {
              "var": "subclass_group",
              "op": "set",
              "value": null
            },
            {
              "var": "subclass",
              "op": "set",
              "value": null
            },
            {
              "var": "class_adjustment",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "FIGHTER",
          "set": [
            {
              "var": "class",
              "op": "set",
              "value": "FIGHTER"
            },
            {
              "var": "subclass_group",
              "op": "set",
              "value": null
            },
            {
              "var": "subclass",
              "op": "set",
              "value": null
            },
            {
              "var": "class_adjustment",
              "op": "set",
              "value": null
            },
            {
              "var": "fighting_style_choice",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_class_adjustment_fighter"
        },
        {
          "value": "ROGUE",
          "set": [
            {
              "var": "class",
              "op": "set",
              "value": "ROGUE"
            },
            {
              "var": "subclass_group",
              "op": "set",
              "value": null
            },
            {
              "var": "subclass",
              "op": "set",
              "value": null
            },
            {
              "var": "class_adjustment",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "MONK",
          "set": [
            {
              "var": "class",
              "op": "set",
              "value": "MONK"
            },
            {
              "var": "subclass_group",
              "op": "set",
              "value": null
            },
            {
              "var": "subclass",
              "op": "set",
              "value": null
            },
            {
              "var": "class_adjustment",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "WIZARD",
          "set": [
            {
              "var": "class",
              "op": "set",
              "value": "WIZARD"
            },
            {
              "var": "subclass_group",
              "op": "set",
              "value": null
            },
            {
              "var": "subclass",
              "op": "set",
              "value": null
            },
            {
              "var": "class_adjustment",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "SORCERER",
          "set": [
            {
              "var": "class",
              "op": "set",
              "value": "SORCERER"
            },
            {
              "var": "subclass_group",
              "op": "set",
              "value": null
            },
            {
              "var": "subclass",
              "op": "set",
              "value": null
            },
            {
              "var": "class_adjustment",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "CLERIC",
          "set": [
            {
              "var": "class",
              "op": "set",
              "value": "CLERIC"
            },
            {
              "var": "subclass_group",
              "op": "set",
              "value": null
            },
            {
              "var": "subclass",
              "op": "set",
              "value": null
            },
            {
              "var": "class_adjustment",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_class_adjustment_cleric"
        },
        {
          "value": "DRUID",
          "set": [
            {
              "var": "class",
              "op": "set",
              "value": "DRUID"
            },
            {
              "var": "subclass_group",
              "op": "set",
              "value": null
            },
            {
              "var": "subclass",
              "op": "set",
              "value": null
            },
            {
              "var": "class_adjustment",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_class_adjustment_druid"
        },
        {
          "value": "ARTIFICER",
          "set": [
            {
              "var": "class",
              "op": "set",
              "value": "ARTIFICER"
            },
            {
              "var": "subclass_group",
              "op": "set",
              "value": "CORE"
            },
            {
              "var": "subclass",
              "op": "set",
              "value": null
            },
            {
              "var": "class_adjustment",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_subclass_choice"
        },
        {
          "value": "PALADIN",
          "set": [
            {
              "var": "class",
              "op": "set",
              "value": "PALADIN"
            },
            {
              "var": "subclass_group",
              "op": "set",
              "value": null
            },
            {
              "var": "subclass",
              "op": "set",
              "value": null
            },
            {
              "var": "class_adjustment",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_class_adjustment_paladin"
        },
        {
          "value": "RANGER",
          "set": [
            {
              "var": "class",
              "op": "set",
              "value": "RANGER"
            },
            {
              "var": "subclass_group",
              "op": "set",
              "value": null
            },
            {
              "var": "subclass",
              "op": "set",
              "value": null
            },
            {
              "var": "class_adjustment",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_class_adjustment_ranger"
        },
        {
          "value": "BARD",
          "set": [
            {
              "var": "class",
              "op": "set",
              "value": "BARD"
            },
            {
              "var": "subclass_group",
              "op": "set",
              "value": null
            },
            {
              "var": "subclass",
              "op": "set",
              "value": null
            },
            {
              "var": "class_adjustment",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "WARLOCK",
          "set": [
            {
              "var": "class",
              "op": "set",
              "value": "WARLOCK"
            },
            {
              "var": "subclass_group",
              "op": "set",
              "value": null
            },
            {
              "var": "subclass",
              "op": "set",
              "value": null
            },
            {
              "var": "class_adjustment",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_class_adjustment_warlock"
        },
        {
          "value": "BLOOD_HUNTER",
          "set": [
            {
              "var": "class",
              "op": "set",
              "value": "BLOOD_HUNTER"
            },
            {
              "var": "subclass_group",
              "op": "set",
              "value": "CORE"
            },
            {
              "var": "subclass",
              "op": "set",
              "value": null
            },
            {
              "var": "class_adjustment",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_subclass_choice"
        }
      ],
      "filter_by_roles": {
        "type": "class"
      },
      "auto_select_if_single_option": true,
      "on_select": [
        {
          "var": "fighting_style_choice",
          "op": "set",
          "value": null
        }
      ]
    },
    "q_subclass_group": {
      "type": "question",
      "section": "class",
      "question": "Preferes explorar subclasses principais ou especializadas?",
      "options": [
        {
          "value": "CORE",
          "set": [
            {
              "var": "subclass_group",
              "op": "set",
              "value": "CORE"
            },
            {
              "var": "subclass",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_subclass_choice"
        },
        {
          "value": "NICHE",
          "set": [
            {
              "var": "subclass_group",
              "op": "set",
              "value": "NICHE"
            },
            {
              "var": "subclass",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_subclass_choice"
        }
      ],
      "filter_by_roles": {
        "type": "subclass_group"
      },
      "auto_select_if_single_option": true
    },
    "q_subclass_choice": {
      "type": "question",
      "section": "class",
      "question": "Qual destas subclasses chama mais por ti?",
      "options_source": {
        "type": "inline",
        "dataset": "subclasses",
        "label_field": "pt",
        "value_field": "code",
        "filters": [
          {
            "field": "class",
            "var": "class",
            "op": "eq",
            "optional": false
          },
          {
            "field": "group",
            "var": "subclass_group",
            "op": "eq",
            "optional": false
          },
          {
            "field": "banned_species",
            "var": "species",
            "op": "not_contains",
            "optional": true
          }
        ]
      },
      "skip_if_no_options": {
        "next": "q_physical_ability_preference"
      },
      "autoselect_if_single": {
        "dataset": "subclasses",
        "filters": [
          {
            "field": "class",
            "var": "class",
            "op": "eq",
            "optional": false
          },
          {
            "field": "group",
            "var": "subclass_group",
            "op": "eq",
            "optional": false
          },
          {
            "field": "banned_species",
            "var": "species",
            "op": "not_contains",
            "optional": true
          }
        ],
        "value_field": "code",
        "set": [
          {
            "var": "subclass",
            "op": "set",
            "value_from_result": true
          }
        ]
      },
      "on_select": [
        {
          "var": "subclass",
          "op": "set",
          "value_from_option": true
        }
      ],
      "next": "q_find_familiar_use",
      "filter_by_roles": {
        "type": "subclass"
      },
      "auto_select_if_single_option": true
    },
    "q_find_familiar_use": {
      "type": "question",
      "section": "class",
      "question": "Pretendes usar o feitiço Find Familiar e ter uma companhia animal mágica?",
      "when": {
        "any": [
          {
            "var": "class",
            "op": "eq",
            "value": "WIZARD"
          },
          {
            "all": [
              {
                "var": "class",
                "op": "eq",
                "value": "FIGHTER"
              },
              {
                "var": "subclass",
                "op": "eq",
                "value": "FIGHTER_ELDRITCH_KNIGHT"
              }
            ]
          },
          {
            "all": [
              {
                "var": "class",
                "op": "eq",
                "value": "ROGUE"
              },
              {
                "var": "subclass",
                "op": "eq",
                "value": "ROGUE_ARCANE_TRICKSTER"
              }
            ]
          }
        ]
      },
      "options": [
        {
          "value": "YES",
          "set": [
            {
              "var": "find_familiar_usage",
              "op": "set",
              "value": "YES"
            },
            {
              "var": "familiar_habitat",
              "op": "set",
              "value": null
            },
            {
              "var": "familiar_companion",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_familiar_habitat"
        },
        {
          "value": "NO",
          "set": [
            {
              "var": "find_familiar_usage",
              "op": "set",
              "value": "NO"
            },
            {
              "var": "familiar_habitat",
              "op": "set",
              "value": null
            },
            {
              "var": "familiar_companion",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_physical_ability_preference"
        }
      ]
    },
    "q_familiar_habitat": {
      "type": "question",
      "section": "class",
      "question": "O teu familiar ideal vive...?",
      "when": {
        "all": [
          {
            "var": "find_familiar_usage",
            "op": "eq",
            "value": "YES"
          }
        ]
      },
      "options": [
        {
          "value": "SKY",
          "set": [
            {
              "var": "familiar_habitat",
              "op": "set",
              "value": "SKY"
            },
            {
              "var": "familiar_companion",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_familiar_creature_sky"
        },
        {
          "value": "LAND",
          "set": [
            {
              "var": "familiar_habitat",
              "op": "set",
              "value": "LAND"
            },
            {
              "var": "familiar_companion",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_familiar_creature_land"
        },
        {
          "value": "WATER",
          "set": [
            {
              "var": "familiar_habitat",
              "op": "set",
              "value": "WATER"
            },
            {
              "var": "familiar_companion",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_familiar_creature_water"
        }
      ]
    },
    "q_familiar_creature_sky": {
      "type": "question",
      "section": "class",
      "question": "Qual destas criaturas aéreas te acompanha?",
      "when": {
        "all": [
          {
            "var": "find_familiar_usage",
            "op": "eq",
            "value": "YES"
          },
          {
            "var": "familiar_habitat",
            "op": "eq",
            "value": "SKY"
          }
        ]
      },
      "options": [
        {
          "value": "BAT",
          "set": [
            {
              "var": "familiar_companion",
              "op": "set",
              "value": "BAT"
            }
          ],
          "next": "q_physical_ability_preference"
        },
        {
          "value": "HAWK",
          "set": [
            {
              "var": "familiar_companion",
              "op": "set",
              "value": "HAWK"
            }
          ],
          "next": "q_physical_ability_preference"
        },
        {
          "value": "OWL",
          "set": [
            {
              "var": "familiar_companion",
              "op": "set",
              "value": "OWL"
            }
          ],
          "next": "q_physical_ability_preference"
        },
        {
          "value": "RAVEN",
          "set": [
            {
              "var": "familiar_companion",
              "op": "set",
              "value": "RAVEN"
            }
          ],
          "next": "q_physical_ability_preference"
        },
        {
          "value": "OTHER_AIR",
          "set": [
            {
              "var": "familiar_companion",
              "op": "set",
              "value": "OTHER_AIR"
            }
          ],
          "next": "q_physical_ability_preference"
        }
      ]
    },
    "q_familiar_creature_land": {
      "type": "question",
      "section": "class",
      "question": "Qual destes animais terrestres partilha a tua jornada?",
      "when": {
        "all": [
          {
            "var": "find_familiar_usage",
            "op": "eq",
            "value": "YES"
          },
          {
            "var": "familiar_habitat",
            "op": "eq",
            "value": "LAND"
          }
        ]
      },
      "options": [
        {
          "value": "CAT",
          "set": [
            {
              "var": "familiar_companion",
              "op": "set",
              "value": "CAT"
            }
          ],
          "next": "q_physical_ability_preference"
        },
        {
          "value": "LIZARD",
          "set": [
            {
              "var": "familiar_companion",
              "op": "set",
              "value": "LIZARD"
            }
          ],
          "next": "q_physical_ability_preference"
        },
        {
          "value": "RAT",
          "set": [
            {
              "var": "familiar_companion",
              "op": "set",
              "value": "RAT"
            }
          ],
          "next": "q_physical_ability_preference"
        },
        {
          "value": "SPIDER",
          "set": [
            {
              "var": "familiar_companion",
              "op": "set",
              "value": "SPIDER"
            }
          ],
          "next": "q_physical_ability_preference"
        },
        {
          "value": "WEASEL",
          "set": [
            {
              "var": "familiar_companion",
              "op": "set",
              "value": "WEASEL"
            }
          ],
          "next": "q_physical_ability_preference"
        },
        {
          "value": "OTHER_LAND",
          "set": [
            {
              "var": "familiar_companion",
              "op": "set",
              "value": "OTHER_LAND"
            }
          ],
          "next": "q_physical_ability_preference"
        }
      ]
    },
    "q_familiar_creature_water": {
      "type": "question",
      "section": "class",
      "question": "Qual destas criaturas aquáticas é tua aliada?",
      "when": {
        "all": [
          {
            "var": "find_familiar_usage",
            "op": "eq",
            "value": "YES"
          },
          {
            "var": "familiar_habitat",
            "op": "eq",
            "value": "WATER"
          }
        ]
      },
      "options": [
        {
          "value": "FROG",
          "set": [
            {
              "var": "familiar_companion",
              "op": "set",
              "value": "FROG"
            }
          ],
          "next": "q_physical_ability_preference"
        },
        {
          "value": "OCTOPUS",
          "set": [
            {
              "var": "familiar_companion",
              "op": "set",
              "value": "OCTOPUS"
            }
          ],
          "next": "q_physical_ability_preference"
        },
        {
          "value": "OTHER_WATER",
          "set": [
            {
              "var": "familiar_companion",
              "op": "set",
              "value": "OTHER_WATER"
            }
          ],
          "next": "q_physical_ability_preference"
        }
      ]
    },
    "q_class_adjustment_cleric": {
      "type": "question",
      "section": "class",
      "question": "Que Divine Order pretendes escolher?",
      "options": [
        {
          "value": "CLERIC_PROTECTOR",
          "when": {
            "none": [
              {
                "var": "species",
                "op": "in",
                "value": [
                  "S001",
                  "S010"
                ]
              }
            ]
          },
          "set": [
            {
              "var": "class_adjustment",
              "op": "set",
              "value": "CLERIC_PROTECTOR"
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "CLERIC_THAUMATURGE",
          "set": [
            {
              "var": "class_adjustment",
              "op": "set",
              "value": "CLERIC_THAUMATURGE"
            }
          ],
          "next": "q_subclass_group"
        }
      ]
    },
    "q_class_adjustment_druid": {
      "type": "question",
      "section": "class",
      "question": "Que Primal Order pretendes escolher?",
      "options": [
        {
          "value": "DRUID_WARDEN",
          "set": [
            {
              "var": "class_adjustment",
              "op": "set",
              "value": "DRUID_WARDEN"
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "DRUID_MAGICIAN",
          "set": [
            {
              "var": "class_adjustment",
              "op": "set",
              "value": "DRUID_MAGICIAN"
            }
          ],
          "next": "q_subclass_group"
        }
      ]
    },
    "q_class_adjustment_warlock": {
      "type": "question",
      "section": "class",
      "question": "Que Pact Boon Invocation pretendes escolher?",
      "options": [
        {
          "value": "WARLOCK_PACT_OF_THE_TOME",
          "set": [
            {
              "var": "class_adjustment",
              "op": "set",
              "value": "WARLOCK_PACT_OF_THE_TOME"
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "WARLOCK_PACT_OF_THE_CHAIN",
          "set": [
            {
              "var": "class_adjustment",
              "op": "set",
              "value": "WARLOCK_PACT_OF_THE_CHAIN"
            },
            {
              "var": "find_familiar_usage",
              "op": "set",
              "value": "YES"
            },
            {
              "var": "familiar_habitat",
              "op": "set",
              "value": null
            },
            {
              "var": "familiar_companion",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_warlock_familiar_type"
        },
        {
          "value": "WARLOCK_PACT_OF_THE_BLADE",
          "set": [
            {
              "var": "class_adjustment",
              "op": "set",
              "value": "WARLOCK_PACT_OF_THE_BLADE"
            }
          ],
          "when": {
            "none": [
              {
                "all": [
                  {
                    "var": "secondary_roles",
                    "op": "contains",
                    "value": "FACE"
                  },
                  {
                    "var": "subclass",
                    "op": "is_set"
                  },
                  {
                    "none": [
                      {
                        "var": "subclass",
                        "op": "eq",
                        "value": "WARLOCK_THE_HEXBLADE"
                      }
                    ]
                  }
                ]
              }
            ]
          },
          "next": "q_subclass_group"
        },
        {
          "value": "WARLOCK_NONE",
          "set": [
            {
              "var": "class_adjustment",
              "op": "set",
              "value": "WARLOCK_NONE"
            }
          ],
          "next": "q_subclass_group"
        }
      ]
    },
    "q_warlock_familiar_type": {
      "type": "question",
      "section": "class",
      "question": "Que tipo de familiar mágico te acompanha nas tuas aventuras?",
      "when": {
        "all": [
          {
            "var": "class",
            "op": "eq",
            "value": "WARLOCK"
          },
          {
            "var": "class_adjustment",
            "op": "eq",
            "value": "WARLOCK_PACT_OF_THE_CHAIN"
          }
        ]
      },
      "options": [
        {
          "value": "WARLOCK_FAMILIAR_EXOTIC",
          "set": [
            {
              "var": "find_familiar_usage",
              "op": "set",
              "value": "YES"
            },
            {
              "var": "familiar_habitat",
              "op": "set",
              "value": null
            },
            {
              "var": "familiar_companion",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_warlock_familiar_style"
        },
        {
          "value": "WARLOCK_FAMILIAR_ANIMAL",
          "set": [
            {
              "var": "find_familiar_usage",
              "op": "set",
              "value": "YES"
            },
            {
              "var": "familiar_habitat",
              "op": "set",
              "value": null
            },
            {
              "var": "familiar_companion",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_warlock_familiar_habitat"
        }
      ]
    },
    "q_warlock_familiar_style": {
      "type": "question",
      "section": "class",
      "question": "Preferes que o teu familiar tenha...?",
      "when": {
        "all": [
          {
            "var": "class",
            "op": "eq",
            "value": "WARLOCK"
          },
          {
            "var": "class_adjustment",
            "op": "eq",
            "value": "WARLOCK_PACT_OF_THE_CHAIN"
          }
        ]
      },
      "options": [
        {
          "value": "WARLOCK_FAMILIAR_INFERNAL",
          "next": "q_warlock_familiar_dark"
        },
        {
          "value": "WARLOCK_FAMILIAR_CELESTIAL",
          "next": "q_warlock_familiar_mystic"
        }
      ]
    },
    "q_warlock_familiar_dark": {
      "type": "question",
      "section": "class",
      "question": "Qual destes seres das trevas preferes como familiar?",
      "when": {
        "all": [
          {
            "var": "class",
            "op": "eq",
            "value": "WARLOCK"
          },
          {
            "var": "class_adjustment",
            "op": "eq",
            "value": "WARLOCK_PACT_OF_THE_CHAIN"
          }
        ]
      },
      "options": [
        {
          "value": "IMP",
          "set": [
            {
              "var": "familiar_companion",
              "op": "set",
              "value": "IMP"
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "QUASIT",
          "set": [
            {
              "var": "familiar_companion",
              "op": "set",
              "value": "QUASIT"
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "SKELETON",
          "set": [
            {
              "var": "familiar_companion",
              "op": "set",
              "value": "SKELETON"
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "SLAAD_TADPOLE",
          "set": [
            {
              "var": "familiar_companion",
              "op": "set",
              "value": "SLAAD_TADPOLE"
            }
          ],
          "next": "q_subclass_group"
        }
      ]
    },
    "q_warlock_familiar_mystic": {
      "type": "question",
      "section": "class",
      "question": "Qual destas criaturas mágicas e fascinantes escolhes?",
      "when": {
        "all": [
          {
            "var": "class",
            "op": "eq",
            "value": "WARLOCK"
          },
          {
            "var": "class_adjustment",
            "op": "eq",
            "value": "WARLOCK_PACT_OF_THE_CHAIN"
          }
        ]
      },
      "options": [
        {
          "value": "PSEUDODRAGON",
          "set": [
            {
              "var": "familiar_companion",
              "op": "set",
              "value": "PSEUDODRAGON"
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "SPHINX_OF_WONDER",
          "set": [
            {
              "var": "familiar_companion",
              "op": "set",
              "value": "SPHINX_OF_WONDER"
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "SPRITE",
          "set": [
            {
              "var": "familiar_companion",
              "op": "set",
              "value": "SPRITE"
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "VENOMOUS_SNAKE",
          "set": [
            {
              "var": "familiar_companion",
              "op": "set",
              "value": "VENOMOUS_SNAKE"
            }
          ],
          "next": "q_subclass_group"
        }
      ]
    },
    "q_warlock_familiar_habitat": {
      "type": "question",
      "section": "class",
      "question": "O teu familiar ideal vive...?",
      "when": {
        "all": [
          {
            "var": "class",
            "op": "eq",
            "value": "WARLOCK"
          },
          {
            "var": "class_adjustment",
            "op": "eq",
            "value": "WARLOCK_PACT_OF_THE_CHAIN"
          },
          {
            "var": "find_familiar_usage",
            "op": "eq",
            "value": "YES"
          }
        ]
      },
      "options": [
        {
          "value": "SKY",
          "set": [
            {
              "var": "familiar_habitat",
              "op": "set",
              "value": "SKY"
            },
            {
              "var": "familiar_companion",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_warlock_familiar_creature_sky"
        },
        {
          "value": "LAND",
          "set": [
            {
              "var": "familiar_habitat",
              "op": "set",
              "value": "LAND"
            },
            {
              "var": "familiar_companion",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_warlock_familiar_creature_land"
        },
        {
          "value": "WATER",
          "set": [
            {
              "var": "familiar_habitat",
              "op": "set",
              "value": "WATER"
            },
            {
              "var": "familiar_companion",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_warlock_familiar_creature_water"
        }
      ]
    },
    "q_warlock_familiar_creature_sky": {
      "type": "question",
      "section": "class",
      "question": "Qual destas criaturas aéreas te acompanha?",
      "when": {
        "all": [
          {
            "var": "class",
            "op": "eq",
            "value": "WARLOCK"
          },
          {
            "var": "class_adjustment",
            "op": "eq",
            "value": "WARLOCK_PACT_OF_THE_CHAIN"
          },
          {
            "var": "familiar_habitat",
            "op": "eq",
            "value": "SKY"
          }
        ]
      },
      "options": [
        {
          "value": "BAT",
          "set": [
            {
              "var": "familiar_companion",
              "op": "set",
              "value": "BAT"
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "HAWK",
          "set": [
            {
              "var": "familiar_companion",
              "op": "set",
              "value": "HAWK"
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "OWL",
          "set": [
            {
              "var": "familiar_companion",
              "op": "set",
              "value": "OWL"
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "RAVEN",
          "set": [
            {
              "var": "familiar_companion",
              "op": "set",
              "value": "RAVEN"
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "OTHER_AIR",
          "set": [
            {
              "var": "familiar_companion",
              "op": "set",
              "value": "OTHER_AIR"
            }
          ],
          "next": "q_subclass_group"
        }
      ]
    },
    "q_warlock_familiar_creature_land": {
      "type": "question",
      "section": "class",
      "question": "Qual destas criaturas terrestres te acompanha?",
      "when": {
        "all": [
          {
            "var": "class",
            "op": "eq",
            "value": "WARLOCK"
          },
          {
            "var": "class_adjustment",
            "op": "eq",
            "value": "WARLOCK_PACT_OF_THE_CHAIN"
          },
          {
            "var": "familiar_habitat",
            "op": "eq",
            "value": "LAND"
          }
        ]
      },
      "options": [
        {
          "value": "CAT",
          "set": [
            {
              "var": "familiar_companion",
              "op": "set",
              "value": "CAT"
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "LIZARD",
          "set": [
            {
              "var": "familiar_companion",
              "op": "set",
              "value": "LIZARD"
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "RAT",
          "set": [
            {
              "var": "familiar_companion",
              "op": "set",
              "value": "RAT"
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "SPIDER",
          "set": [
            {
              "var": "familiar_companion",
              "op": "set",
              "value": "SPIDER"
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "WEASEL",
          "set": [
            {
              "var": "familiar_companion",
              "op": "set",
              "value": "WEASEL"
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "OTHER_LAND",
          "set": [
            {
              "var": "familiar_companion",
              "op": "set",
              "value": "OTHER_LAND"
            }
          ],
          "next": "q_subclass_group"
        }
      ]
    },
    "q_warlock_familiar_creature_water": {
      "type": "question",
      "section": "class",
      "question": "Qual destas criaturas aquáticas te acompanha?",
      "when": {
        "all": [
          {
            "var": "class",
            "op": "eq",
            "value": "WARLOCK"
          },
          {
            "var": "class_adjustment",
            "op": "eq",
            "value": "WARLOCK_PACT_OF_THE_CHAIN"
          },
          {
            "var": "familiar_habitat",
            "op": "eq",
            "value": "WATER"
          }
        ]
      },
      "options": [
        {
          "value": "FROG",
          "set": [
            {
              "var": "familiar_companion",
              "op": "set",
              "value": "FROG"
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "OCTOPUS",
          "set": [
            {
              "var": "familiar_companion",
              "op": "set",
              "value": "OCTOPUS"
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "OTHER_WATER",
          "set": [
            {
              "var": "familiar_companion",
              "op": "set",
              "value": "OTHER_WATER"
            }
          ],
          "next": "q_subclass_group"
        }
      ]
    },
    "q_class_adjustment_fighter": {
      "type": "question",
      "section": "class",
      "question": "Que Estilo de Luta preferes aprender?",
      "options": [
        {
          "value": "FIGHTER_FIGHTING_STYLE_CLASSIC",
          "set": [
            {
              "var": "class_adjustment",
              "op": "set",
              "value": null
            },
            {
              "var": "fighting_style_choice",
              "op": "set",
              "value": "CLASSIC"
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "FIGHTER_FIGHTING_STYLE_THROWN",
          "set": [
            {
              "var": "class_adjustment",
              "op": "set",
              "value": null
            },
            {
              "var": "fighting_style_choice",
              "op": "set",
              "value": "THROWN"
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "FIGHTER_FIGHTING_STYLE_UNARMED",
          "set": [
            {
              "var": "class_adjustment",
              "op": "set",
              "value": null
            },
            {
              "var": "fighting_style_choice",
              "op": "set",
              "value": "UNARMED"
            }
          ],
          "next": "q_subclass_group"
        }
      ]
    },
    "q_class_adjustment_ranger": {
      "type": "question",
      "section": "class",
      "question": "Que Estilo de Luta preferes aprender?",
      "options": [
        {
          "value": "RANGER_FIGHTING_STYLE_CLASSIC",
          "set": [
            {
              "var": "class_adjustment",
              "op": "set",
              "value": "RANGER_DRUIDIC_WARRIOR_NAO"
            },
            {
              "var": "fighting_style_choice",
              "op": "set",
              "value": "CLASSIC"
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "RANGER_FIGHTING_STYLE_DRUIDIC",
          "set": [
            {
              "var": "class_adjustment",
              "op": "set",
              "value": "RANGER_DRUIDIC_WARRIOR_SIM"
            },
            {
              "var": "fighting_style_choice",
              "op": "set",
              "value": "DRUIDIC_WARRIOR"
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "RANGER_FIGHTING_STYLE_THROWN",
          "set": [
            {
              "var": "class_adjustment",
              "op": "set",
              "value": "RANGER_DRUIDIC_WARRIOR_NAO"
            },
            {
              "var": "fighting_style_choice",
              "op": "set",
              "value": "THROWN"
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "RANGER_FIGHTING_STYLE_UNARMED",
          "set": [
            {
              "var": "class_adjustment",
              "op": "set",
              "value": "RANGER_DRUIDIC_WARRIOR_NAO"
            },
            {
              "var": "fighting_style_choice",
              "op": "set",
              "value": "UNARMED"
            }
          ],
          "next": "q_subclass_group"
        }
      ]
    },
    "q_class_adjustment_paladin": {
      "type": "question",
      "section": "class",
      "question": "Que Estilo de Luta preferes aprender?",
      "options": [
        {
          "value": "PALADIN_FIGHTING_STYLE_CLASSIC",
          "set": [
            {
              "var": "class_adjustment",
              "op": "set",
              "value": "PALADIN_BLESSED_WARRIOR_NAO"
            },
            {
              "var": "fighting_style_choice",
              "op": "set",
              "value": "CLASSIC"
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "PALADIN_FIGHTING_STYLE_BLESSED",
          "set": [
            {
              "var": "class_adjustment",
              "op": "set",
              "value": "PALADIN_BLESSED_WARRIOR_SIM"
            },
            {
              "var": "fighting_style_choice",
              "op": "set",
              "value": "BLESSED_WARRIOR"
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "PALADIN_FIGHTING_STYLE_THROWN",
          "set": [
            {
              "var": "class_adjustment",
              "op": "set",
              "value": "PALADIN_BLESSED_WARRIOR_NAO"
            },
            {
              "var": "fighting_style_choice",
              "op": "set",
              "value": "THROWN"
            }
          ],
          "next": "q_subclass_group"
        },
        {
          "value": "PALADIN_FIGHTING_STYLE_UNARMED",
          "set": [
            {
              "var": "class_adjustment",
              "op": "set",
              "value": "PALADIN_BLESSED_WARRIOR_NAO"
            },
            {
              "var": "fighting_style_choice",
              "op": "set",
              "value": "UNARMED"
            }
          ],
          "next": "q_subclass_group"
        }
      ]
    },
    "q_physical_ability_preference": {
      "type": "question",
      "section": "class",
      "question": "Preferes destacar a Destreza (DEX) ou a Força (STR) da tua personagem?",
      "when": {
        "var": "variant_requires_physical_preference",
        "op": "eq",
        "value": true
      },
      "options": [
        {
          "value": "DEX",
          "set": [
            {
              "var": "preferred_physical_ability",
              "op": "set",
              "value": "DEX"
            }
          ],
          "next": "q_background_world_origin"
        },
        {
          "value": "STR",
          "set": [
            {
              "var": "preferred_physical_ability",
              "op": "set",
              "value": "STR"
            }
          ],
          "next": "q_background_world_origin"
        }
      ],
      "next": "q_background_world_origin"
    },
    "q_background_world_origin": {
      "type": "question",
      "section": "background",
      "question": "A minha personagem é natural do mundo de Eberron?",
      "when": {
        "var": "class_ability_combo",
        "op": "is_set"
      },
      "options": [
        {
          "value": "YES",
          "set": [
            {
              "var": "background_world",
              "op": "set",
              "value": "EBERRON"
            }
          ],
          "next": "q_background_eberron_choice"
        },
        {
          "value": "NO",
          "set": [
            {
              "var": "background_world",
              "op": "set",
              "value": "OTHER"
            }
          ],
          "next": "q_background_preference"
        }
      ],
      "next": "q_background_preference"
    },
    "q_background_eberron_choice": {
      "type": "question",
      "section": "background",
      "question": "A minha personagem…",
      "when": {
        "var": "background_world",
        "op": "eq",
        "value": "EBERRON"
      },
      "options": [
        {
          "value": "ABERRANT_HEIR",
          "datasetEntry": {
            "code": "ABERRANT_HEIR",
            "ability_increases": [
              "STR",
              "CON",
              "CHA"
            ]
          },
          "set": [
            {
              "var": "background",
              "op": "set",
              "value_from_option": true
            }
          ],
          "next": "q_dark_gift_presence"
        },
        {
          "value": "HOUSE_CANNITH_HEIR",
          "datasetEntry": {
            "code": "HOUSE_CANNITH_HEIR",
            "ability_increases": [
              "STR",
              "DEX",
              "INT"
            ]
          },
          "set": [
            {
              "var": "background",
              "op": "set",
              "value_from_option": true
            }
          ],
          "next": "q_dark_gift_presence"
        },
        {
          "value": "HOUSE_DENEITH_HEIR",
          "datasetEntry": {
            "code": "HOUSE_DENEITH_HEIR",
            "ability_increases": [
              "STR",
              "CON",
              "WIS"
            ]
          },
          "set": [
            {
              "var": "background",
              "op": "set",
              "value_from_option": true
            }
          ],
          "next": "q_dark_gift_presence"
        },
        {
          "value": "HOUSE_GHALLANDA_HEIR",
          "datasetEntry": {
            "code": "HOUSE_GHALLANDA_HEIR",
            "ability_increases": [
              "DEX",
              "WIS",
              "CHA"
            ]
          },
          "set": [
            {
              "var": "background",
              "op": "set",
              "value_from_option": true
            }
          ],
          "next": "q_dark_gift_presence"
        },
        {
          "value": "HOUSE_JORASCO_HEIR",
          "datasetEntry": {
            "code": "HOUSE_JORASCO_HEIR",
            "ability_increases": [
              "DEX",
              "CON",
              "WIS"
            ]
          },
          "set": [
            {
              "var": "background",
              "op": "set",
              "value_from_option": true
            }
          ],
          "next": "q_dark_gift_presence"
        },
        {
          "value": "HOUSE_KUNDARAK_HEIR",
          "datasetEntry": {
            "code": "HOUSE_KUNDARAK_HEIR",
            "ability_increases": [
              "STR",
              "CON",
              "INT"
            ]
          },
          "set": [
            {
              "var": "background",
              "op": "set",
              "value_from_option": true
            }
          ],
          "next": "q_dark_gift_presence"
        },
        {
          "value": "HOUSE_LYRANDAR_HEIR",
          "datasetEntry": {
            "code": "HOUSE_LYRANDAR_HEIR",
            "ability_increases": [
              "STR",
              "DEX",
              "CHA"
            ]
          },
          "set": [
            {
              "var": "background",
              "op": "set",
              "value_from_option": true
            }
          ],
          "next": "q_dark_gift_presence"
        },
        {
          "value": "HOUSE_MEDANI_HEIR",
          "datasetEntry": {
            "code": "HOUSE_MEDANI_HEIR",
            "ability_increases": [
              "DEX",
              "INT",
              "WIS"
            ]
          },
          "set": [
            {
              "var": "background",
              "op": "set",
              "value_from_option": true
            }
          ],
          "next": "q_dark_gift_presence"
        },
        {
          "value": "HOUSE_ORIEN_HEIR",
          "datasetEntry": {
            "code": "HOUSE_ORIEN_HEIR",
            "ability_increases": [
              "DEX",
              "CON",
              "INT"
            ]
          },
          "set": [
            {
              "var": "background",
              "op": "set",
              "value_from_option": true
            }
          ],
          "next": "q_dark_gift_presence"
        },
        {
          "value": "HOUSE_PHIARLAN_HEIR",
          "datasetEntry": {
            "code": "HOUSE_PHIARLAN_HEIR",
            "ability_increases": [
              "DEX",
              "WIS",
              "CHA"
            ]
          },
          "set": [
            {
              "var": "background",
              "op": "set",
              "value_from_option": true
            }
          ],
          "next": "q_dark_gift_presence"
        },
        {
          "value": "HOUSE_SIVIS_HEIR",
          "datasetEntry": {
            "code": "HOUSE_SIVIS_HEIR",
            "ability_increases": [
              "INT",
              "WIS",
              "CHA"
            ]
          },
          "set": [
            {
              "var": "background",
              "op": "set",
              "value_from_option": true
            }
          ],
          "next": "q_dark_gift_presence"
        },
        {
          "value": "HOUSE_THARASHK_HEIR",
          "datasetEntry": {
            "code": "HOUSE_THARASHK_HEIR",
            "ability_increases": [
              "CON",
              "INT",
              "WIS"
            ]
          },
          "set": [
            {
              "var": "background",
              "op": "set",
              "value_from_option": true
            }
          ],
          "next": "q_dark_gift_presence"
        },
        {
          "value": "HOUSE_THURANNI_HEIR",
          "datasetEntry": {
            "code": "HOUSE_THURANNI_HEIR",
            "ability_increases": [
              "DEX",
              "INT",
              "CHA"
            ]
          },
          "set": [
            {
              "var": "background",
              "op": "set",
              "value_from_option": true
            }
          ],
          "next": "q_dark_gift_presence"
        },
        {
          "value": "HOUSE_VADALIS_HEIR",
          "datasetEntry": {
            "code": "HOUSE_VADALIS_HEIR",
            "ability_increases": [
              "CON",
              "WIS",
              "CHA"
            ]
          },
          "set": [
            {
              "var": "background",
              "op": "set",
              "value_from_option": true
            }
          ],
          "next": "q_dark_gift_presence"
        },
        {
          "value": "NO_DRAGONMARK",
          "datasetEntry": {
            "code": "NO_DRAGONMARK",
            "ability_increases": [
              "STR",
              "DEX",
              "CON",
              "INT",
              "WIS",
              "CHA"
            ]
          },
          "next": "q_background_preference"
        }
      ],
      "ability_overlap_filter": {
        "variable": "_class_ability_combo_codes",
        "entry_field": "ability_increases",
        "min_overlap": 2,
        "face_role_variable": "secondary_roles",
        "face_requires_cha": true
      },
      "skip_if_no_options": {
        "next": "q_background_preference"
      },
      "auto_select_if_single_option": true,
      "next": "q_dark_gift_presence"
    },
    "q_background_preference": {
      "type": "question",
      "section": "background",
      "question": "Que tipo de vida levou a tua personagem?",
      "when": {
        "var": "class_ability_combo",
        "op": "is_set"
      },
      "options_source": {
        "type": "inline",
        "dataset": "backgrounds",
        "label_field": "pt",
        "value_field": "code"
      },
      "ability_overlap_filter": {
        "variable": "_class_ability_combo_codes",
        "entry_field": "ability_increases",
        "min_overlap": 2,
        "face_role_variable": "secondary_roles",
        "face_requires_cha": true
      },
      "on_select": [
        {
          "var": "background",
          "op": "set",
          "value_from_option": true
        }
      ],
      "skip_if_no_options": {
        "next": "q_dark_gift_presence"
      },
      "auto_select_if_single_option": true,
      "next": "q_dark_gift_presence"
    },
    "q_dark_gift_presence": {
      "type": "question",
      "section": "dark_gift",
      "question": "A tua personagem carrega uma maldição?",
      "options": [
        {
          "value": "YES",
          "set": [
            {
              "var": "dark_gift",
              "op": "set",
              "value": null
            }
          ],
          "next": "q_dark_gift_type"
        },
        {
          "value": "NO",
          "set": [
            {
              "var": "dark_gift",
              "op": "set",
              "value": "NONE"
            }
          ],
          "next": null
        }
      ]
    },
    "q_dark_gift_type": {
      "type": "question",
      "section": "dark_gift",
      "question": "Que tipo de maldição ela tem?",
      "options": [
        {
          "value": "ECHOING_SOUL",
          "set": [
            {
              "var": "dark_gift",
              "op": "set",
              "value": "ECHOING_SOUL"
            }
          ],
          "next": null
        },
        {
          "value": "GATHERED_WHISPERS",
          "set": [
            {
              "var": "dark_gift",
              "op": "set",
              "value": "GATHERED_WHISPERS"
            }
          ],
          "next": null
        },
        {
          "value": "LIVING_SHADOW",
          "set": [
            {
              "var": "dark_gift",
              "op": "set",
              "value": "LIVING_SHADOW"
            }
          ],
          "next": null
        },
        {
          "value": "MIST_WALKER",
          "set": [
            {
              "var": "dark_gift",
              "op": "set",
              "value": "MIST_WALKER"
            }
          ],
          "next": null
        },
        {
          "value": "SECOND_SKIN",
          "set": [
            {
              "var": "dark_gift",
              "op": "set",
              "value": "SECOND_SKIN"
            }
          ],
          "next": null
        },
        {
          "value": "SYMBIOTIC_BEING",
          "set": [
            {
              "var": "dark_gift",
              "op": "set",
              "value": "SYMBIOTIC_BEING"
            }
          ],
          "next": null
        },
        {
          "value": "TOUCH_OF_DEATH",
          "set": [
            {
              "var": "dark_gift",
              "op": "set",
              "value": "TOUCH_OF_DEATH"
            }
          ],
          "next": null
        },
        {
          "value": "WATCHERS",
          "set": [
            {
              "var": "dark_gift",
              "op": "set",
              "value": "WATCHERS"
            }
          ],
          "next": null
        }
      ]
    }
  }
}

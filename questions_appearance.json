{
  "root": "q_gender",
  "nodes": {
    "q_gender": {
      "type": "question",
      "section": "gender",
      "question": "Como se apresenta a tua personagem em termos de g\u00e9nero?",
      "options": [
        {
          "label": "Feminina",
          "value": "A",
          "set": [
            {
              "var": "gender",
              "op": "set",
              "value": "A"
            }
          ],
          "next": "q_height"
        },
        {
          "label": "Masculina",
          "value": "B",
          "set": [
            {
              "var": "gender",
              "op": "set",
              "value": "B"
            }
          ],
          "next": "q_height"
        },
        {
          "label": "Andr\u00f3gina",
          "value": "C",
          "set": [
            {
              "var": "gender",
              "op": "set",
              "value": "C"
            }
          ],
          "next": "q_height"
        }
      ]
    },
    "q_height": {
      "type": "question",
      "section": "species",
      "question": "Em que faixa de alturas se encaixa a tua personagem?",
      "options": [
        {
          "label": "Min\u00fascula \u2014 0,6\u20130,9 m",
          "value": "A",
          "set": [
            {
              "var": "height",
              "op": "set",
              "value": "A"
            }
          ],
          "next": "q_species_exoticness"
        },
        {
          "label": "Baixa \u2014 ~1,2 m",
          "value": "B",
          "set": [
            {
              "var": "height",
              "op": "set",
              "value": "B"
            }
          ],
          "next": "q_species_exoticness"
        },
        {
          "label": "M\u00e9dia \u2014 1,5\u20131,8 m",
          "value": "C",
          "set": [
            {
              "var": "height",
              "op": "set",
              "value": "C"
            }
          ],
          "next": "q_species_exoticness"
        },
        {
          "label": "Alta \u2014 2,1\u20132,4 m",
          "value": "D",
          "set": [
            {
              "var": "height",
              "op": "set",
              "value": "D"
            }
          ],
          "next": "q_species_exoticness"
        }
      ]
    },
    "q_species_exoticness": {
      "type": "question",
      "section": "species",
      "question": "Qu\u00e3o ex\u00f3tica pretendes que a esp\u00e9cie da tua personagem seja?",
      "prune_zero_viable_options": {
        "dataset": "species",
        "option_field": "species_commonality",
        "filters": [
          {
            "field": "height",
            "var": "height",
            "op": "contains",
            "optional": false
          }
        ],
        "exclude_values": [
          "A"
        ]
      },
      "options": [
        {
          "label": "A esp\u00e9cie humana",
          "value": "A",
          "set": [
            {
              "var": "species_commonality",
              "op": "set",
              "value": "A"
            },
            {
              "var": "species",
              "op": "set",
              "value": "A"
            }
          ],
          "next": "q_class_complexity"
        },
        {
          "label": "N\u00e3o humana \u2014 conhecida",
          "value": "B",
          "set": [
            {
              "var": "species_commonality",
              "op": "set",
              "value": "B"
            }
          ],
          "next": "q_species_animal_likeness"
        },
        {
          "label": "N\u00e3o humana \u2014 estranha para alguns",
          "value": "C",
          "set": [
            {
              "var": "species_commonality",
              "op": "set",
              "value": "C"
            }
          ],
          "next": "q_species_animal_likeness"
        },
        {
          "label": "N\u00e3o humana \u2014 estranha para a maioria",
          "value": "D",
          "set": [
            {
              "var": "species_commonality",
              "op": "set",
              "value": "D"
            }
          ],
          "next": "q_species_animal_likeness"
        }
      ]
    },
    "q_species_animal_likeness": {
      "type": "question",
      "section": "species",
      "question": "A tua personagem tem tra\u00e7os de animal?",
      "prune_zero_viable_options": {
        "dataset": "species",
        "option_field": "animal_likeness",
        "filters": [
          {
            "field": "height",
            "var": "height",
            "op": "contains",
            "optional": false
          },
          {
            "field": "species_commonality",
            "var": "species_commonality",
            "op": "contains",
            "optional": false
          }
        ]
      },
      "options": [
        {
          "label": "Sim",
          "value": "A",
          "set": [
            {
              "var": "animal_likeness",
              "op": "set",
              "value": "A"
            }
          ],
          "next": "q_species_pick"
        },
        {
          "label": "N\u00e3o",
          "value": "B",
          "set": [
            {
              "var": "animal_likeness",
              "op": "set",
              "value": "B"
            }
          ],
          "next": "q_species_pick"
        }
      ]
    },
    "q_species_pick": {
      "type": "question",
      "section": "species",
      "question": "Que esp\u00e9cie preferes jogar?",
      "options_source": {
        "type": "inline",
        "dataset": "species",
        "label_field": "pt",
        "value_field": "code",
        "filters": [
          {
            "field": "height",
            "var": "height",
            "op": "contains",
            "optional": true
          },
          {
            "field": "species_commonality",
            "var": "species_commonality",
            "op": "contains",
            "optional": true
          },
          {
            "field": "animal_likeness",
            "var": "animal_likeness",
            "op": "contains",
            "optional": true
          }
        ]
      },
      "autoselect_if_single": {
        "dataset": "species",
        "filters": [
          {
            "field": "height",
            "var": "height",
            "op": "contains",
            "optional": true
          },
          {
            "field": "species_commonality",
            "var": "species_commonality",
            "op": "contains",
            "optional": true
          },
          {
            "field": "animal_likeness",
            "var": "animal_likeness",
            "op": "contains",
            "optional": true
          }
        ],
        "value_field": "code",
        "set": [
          {
            "var": "species",
            "op": "set",
            "value_from_result": true
          }
        ],
        "skip_to": "q_subspecies_pick"
      },
      "on_select": [
        {
          "var": "species",
          "op": "set",
          "value_from_option": true
        }
      ],
      "next": "q_subspecies_pick"
    },
    "q_subspecies_pick": {
      "type": "question",
      "section": "species",
      "when": {
        "all": [
          {
            "var": "species",
            "op": "in",
            "value": [
              "S006",
              "S007",
              "S008",
              "S009",
              "S012",
              "S013",
              "S014",
              "S015",
              "S017",
              "S019",
              "S024",
              "S026",
              "S030",
              "S032"
            ]
          }
        ],
        "none": [
          {
            "var": "subspecies",
            "op": "is_set"
          }
        ]
      },
      "question": "Que subesp\u00e9cie preferes jogar?",
      "options_source": {
        "type": "inline",
        "dataset": "subspecies",
        "label_field": "pt",
        "value_field": "code",
        "filters": [
          {
            "field": "species_code",
            "var": "species",
            "op": "eq",
            "optional": false
          },
          {
            "field": "height",
            "var": "height",
            "op": "contains",
            "optional": true
          },
          {
            "field": "animal_likeness",
            "var": "animal_likeness",
            "op": "contains",
            "optional": true
          }
        ]
      },
      "autoselect_if_single": {
        "dataset": "subspecies",
        "filters": [
          {
            "field": "species_code",
            "var": "species",
            "op": "eq",
            "optional": false
          },
          {
            "field": "height",
            "var": "height",
            "op": "contains",
            "optional": true
          },
          {
            "field": "animal_likeness",
            "var": "animal_likeness",
            "op": "contains",
            "optional": true
          }
        ],
        "value_field": "code",
        "set": [
          {
            "var": "subspecies",
            "op": "set",
            "value_from_result": true
          }
        ],
        "skip_to": "q_subsubspecies_eladrin"
      },
      "skip_if_no_options": {
        "next": "q_subsubspecies_eladrin"
      },
      "on_select": [
        {
          "var": "subspecies",
          "op": "set",
          "value_from_option": true
        }
      ],
      "next": "q_subsubspecies_eladrin"
    },
    "q_subsubspecies_eladrin": {
      "type": "question",
      "section": "species",
      "when": {
        "all": [
          {
            "var": "subspecies",
            "op": "eq",
            "value": "SS017"
          }
        ]
      },
      "question": "Que sub-subesp\u00e9cie de Eladrin preferes jogar?",
      "options_source": {
        "type": "inline",
        "dataset": "subsubspecies",
        "label_field": "pt",
        "value_field": "code",
        "filters": [
          {
            "field": "subspecies_code",
            "var": "subspecies",
            "op": "eq",
            "optional": false
          },
          {
            "field": "height",
            "var": "height",
            "op": "contains",
            "optional": true
          },
          {
            "field": "animal_likeness",
            "var": "animal_likeness",
            "op": "contains",
            "optional": true
          }
        ]
      },
      "autoselect_if_single": {
        "dataset": "subsubspecies",
        "filters": [
          {
            "field": "subspecies_code",
            "var": "subspecies",
            "op": "eq",
            "optional": false
          },
          {
            "field": "height",
            "var": "height",
            "op": "contains",
            "optional": true
          },
          {
            "field": "animal_likeness",
            "var": "animal_likeness",
            "op": "contains",
            "optional": true
          }
        ],
        "value_field": "code",
        "set": [
          {
            "var": "subsubspecies",
            "op": "set",
            "value_from_result": true
          }
        ],
        "skip_to": "q_class_complexity"
      },
      "skip_if_no_options": {
        "next": "q_class_complexity"
      },
      "on_select": [
        {
          "var": "subsubspecies",
          "op": "set",
          "value_from_option": true
        }
      ],
      "next": "q_class_complexity"
    }
  }
}
